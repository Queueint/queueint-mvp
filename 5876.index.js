"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5876],{36801:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(28276),n=a.n(r),o=a(5368),i=a.n(o)()(n());i.push([e.id,'.backButton{display:inline-block;font-size:.8666em;height:1.5625em;color:#8692a6;background-color:transparent;border:0;cursor:pointer;font-family:"Poppins",sans-serif;padding:0;margin:0;font-weight:500}@media screen and (min-width: 852px){.backButton{font-size:.8421em}}.backButton:lang(he){font-family:"Assistant","sans-serif"}.backButton .icon{margin-inline-end:.375em}.backButton.placeholder{height:1.3em}',""]);const s=i},5199:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(28276),n=a.n(r),o=a(5368),i=a.n(o)()(n());i.push([e.id,'.cardPage{display:flex;flex-direction:column}.cardPage.withBottomPanel .card{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:0}.cardPage .card{position:relative;margin:0 1.2em 1.2em;background-color:#fff;border-radius:11px;overflow-y:auto;display:flex;flex-direction:column;gap:1rem;height:100%;box-sizing:border-box;flex-grow:1;scrollbar-color:#5bc6f9 #dadada;scrollbar-width:thin}@media screen and (max-width: 380px){.cardPage .card{gap:0rem;margin:0 1.2em 1.2em}}.cardPage .card::-webkit-scrollbar{width:3pt}.cardPage .card::-webkit-scrollbar-track{background-color:#dadada;border-radius:3pt}.cardPage .card::-webkit-scrollbar-thumb{background-color:#5bc6f9;border-radius:3pt}.cardPage .card::-webkit-scrollbar-thumb:hover{background-color:#3bb1e7}.cardPage .card .cardTop{border-bottom:1px solid #f1f1f1}.cardPage .card .cardTop .backButton{margin-top:2.0212em;font-size:1.0666em;line-height:1.3081em;color:#000;margin-inline-start:1.0937em}.cardPage .card .cardTop .cardTopHeader{display:flex;align-items:center;justify-content:center;text-align:start;margin-left:1.36667em;margin-right:1.36667em;margin-bottom:1.73333em}.cardPage .card .cardTop .cardTopHeader .titleContainer{display:flex;align-items:center;justify-content:center;margin:2rem auto 0rem auto;gap:1rem}.cardPage .card .cardTop .cardTopHeader .titleContainer:lang(he){font-family:"Assistant","sans-serif"}@media screen and (max-width: 500px){.cardPage .card .cardTop .cardTopHeader .titleContainer:lang(he){margin:2rem 0 0rem auto}}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout{line-height:1.3333em;padding:1em .8333em 1.5em;translate:0 50%;max-width:36em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout.ms-Callout{font-size:.8em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout button{background-color:transparent;border:0;cursor:pointer;color:#5bc6f9;font-size:.7708em;padding:0 0 1.1621em 1.1621em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout button i{height:1em;width:1em}.cardPage .card .cardTop .cardTopHeader button{background-color:#5fcf90;border-radius:50%;border-style:none;color:#fff;margin-inline-start:.4125em;line-height:1em;padding:.25em .63em;cursor:pointer}.cardPage .card .cardTop .cardTopHeader .cardTopHeaderText{font-size:1.66667em;font-weight:700;margin:0}@media screen and (max-width: 500px){.cardPage .card .cardTop .cardTopHeader .cardTopHeaderText{font-size:1.3em}}.cardPage .card .cardTop .cardTopHeader .titleIcon{font-size:1.7333em;margin-left:.32em;margin-right:.32em}.cardPage .buttonContainer{flex:0 0 3.53333em;background-color:#fff;width:100%;border-top:1px solid #dfdfdf;display:flex}.cardPage .buttonContainer .button{font-size:1em;margin:.8em;flex:1}.cardPage .buttonContainer .button .ms-Button-flexContainer{padding:.3333em;line-height:1.308em;height:1.3333em}',""]);const s=i},77550:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(28276),n=a.n(r),o=a(5368),i=a.n(o)()(n());i.push([e.id,".spinner{box-sizing:border-box;border-radius:100%;border-style:solid;border-width:2px;border-color:#8cdbff #8cdbff transparent transparent;border-top:0;position:absolute;top:50%;left:50%;pointer-events:none}.spinner.s0{transform:translate(-50%, -50%) rotate(0)}.spinner.s1{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(0)}.spinner.s2{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(360deg)}",""]);const s=i},25872:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(28276),n=a.n(r),o=a(5368),i=a.n(o)()(n());i.push([e.id,'.areaPage table{border-collapse:collapse}.areaPage table thead{font-size:1.2em;font-weight:600}.areaPage table thead tr{border:1px solid;border-color:transparent;border-bottom-color:#eaeaea}.areaPage table thead tr th:first-child{width:100%;text-align:start;padding-inline-start:1.444em}.areaPage table thead tr th{word-wrap:break-word;padding-top:.66667em;padding-bottom:1em;min-width:4.117em}.areaPage table tbody::after{height:.333em;display:table-row;content:""}.areaPage table tbody tr{border:1px solid #eaeaea}.areaPage table tbody tr td:first-child div{width:100%}.areaPage table tbody tr td{text-align:center;padding:.8em .6667em}.areaPage table tbody tr td .button{width:3.6em;min-width:0;font-size:1em;height:2em}.areaPage table tbody tr td .button .ms-Icon{padding-inline-start:0;margin:0}',""]);const s=i},14469:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(51855),n=a(26154),o=a(47562),i=a(78451);function s(e,t={}){const a=(0,n.Z)(),s="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:l=!1,matchMedia:c=(s?window.matchMedia:null),noSsr:d=!1,ssrMatchMedia:u=null}=(0,o.Z)({name:"MuiUseMediaQuery",props:t,theme:a});let m="function"==typeof e?e(a):e;m=m.replace(/^@media( ?)/m,"");const[p,h]=r.useState((()=>d&&s?c(m).matches:u?u(m).matches:l));return(0,i.Z)((()=>{let e=!0;if(!s)return;const t=c(m),a=()=>{e&&h(t.matches)};return a(),t.addListener(a),()=>{e=!1,t.removeListener(a)}}),[m,c,s]),p}},22405:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(51855),n=a(5591),o=a(72220),i=a(19350);const s=e=>{const t=(0,n.s0)(),a=function(){const[,e]=(0,r.useState)(0);return()=>{e((e=>e+1))}}(),s=sessionStorage.getItem("authToken"),l=localStorage.getItem("credentialToken");return(0,r.useEffect)((()=>{let e=null;return s||(l?(0,o.Z)({credentialTokenUuid:l}).catch((()=>{localStorage.removeItem("credentialToken")})).finally((()=>{a()})):e=setTimeout((()=>{t("/login",{replace:!0})}),3e3)),()=>{e&&clearTimeout(e)}}),[s,l]),s?r.createElement(r.Fragment,null,e.children):l?r.createElement("div",{className:"narrowContent paddedContent"},r.createElement("h1",null,"טוען"),r.createElement(i.Z,null)):r.createElement("div",{className:"narrowContent paddedContent"},r.createElement("h1",null,"אין לך הרשאה לעמוד זה"))}},96816:(e,t,a)=>{a.d(t,{Z:()=>k});var r=a(51855),n=a(38032),o=a(2490),i=a(61495),s=a(93379),l=a.n(s),c=a(7795),d=a.n(c),u=a(90569),m=a.n(u),p=a(3565),h=a.n(p),b=a(19216),g=a.n(b),f=a(44589),y=a.n(f),v=a(36801),E={};E.styleTagTransform=y(),E.setAttributes=h(),E.insert=m().bind(null,"head"),E.domAPI=d(),E.insertStyleElement=g(),l()(v.Z,E),v.Z&&v.Z.locals&&v.Z.locals;const T={en:{back:"Back"},he:{back:"חזור"}},k=e=>{const t=(0,r.useContext)(o.r),a=i.Z.useTranslationNamespace("backButton",(e=>Promise.resolve(T[e]))),s=i.Z.useIsRtl(),l=!!e.override,c=t=>(e.className||"").split(" ").concat(t).join(" ");return t.canGoBack||l?r.createElement("button",{className:c("backButton"),type:"button",onClick:l?e.override:t.goBack},r.createElement(n.J,{iconName:s?"chevronRight":"chevronLeft",className:"icon"}),a("back")):r.createElement("div",{className:c("backButton placeholder")})}},51491:(e,t,a)=>{a.d(t,{Z:()=>k});var r=a(51855),n=a(38032),o=a(96816),i=a(34297),s=a(1285),l=a(93379),c=a.n(l),d=a(7795),u=a.n(d),m=a(90569),p=a.n(m),h=a(3565),b=a.n(h),g=a(19216),f=a.n(g),y=a(44589),v=a.n(y),E=a(5199),T={};T.styleTagTransform=v(),T.setAttributes=b(),T.insert=p().bind(null,"head"),T.domAPI=u(),T.insertStyleElement=f(),c()(E.Z,T),E.Z&&E.Z.locals&&E.Z.locals;const k=e=>{const[t,a]=(0,r.useState)(!1);return r.createElement("div",{className:(l="fullHeight cardPage"+(e.bottomPanel?" withBottomPanel":""),(e.className||"").split(" ").concat(l).join(" "))},r.createElement("div",{className:"card"},r.createElement("div",{className:"cardTop"},!e.hideBack&&r.createElement(o.Z,{override:e.backButtonOverride}),r.createElement("div",{className:"cardTopHeader"},r.createElement("div",{className:"titleContainer"},e.iconName?r.createElement(n.J,{iconName:e.iconName,className:"titleIcon"}):null,r.createElement("h1",{className:"cardTopHeaderText"},e.title)),e.layerInfo?r.createElement(r.Fragment,null,r.createElement("button",{id:"layerGroupInfoButton",type:"button",onClick:()=>a(!0)},"i"),t&&r.createElement(i.U,{className:"customerDetailCallout",target:".seatSetting__numinput-container",onDismiss:()=>a(!1),directionalHint:s.b.topCenter},r.createElement("button",{type:"button",onClick:()=>a(!1)},r.createElement(n.J,{iconName:"times"})),r.createElement("div",null,e.callout))):null)),e.cardContent),e.bottomPanel&&r.createElement("div",{className:e.bottomPanelClass?e.bottomPanelClass:"buttonContainer"},e.bottomPanel));var l}},19350:(e,t,a)=>{a.d(t,{Z:()=>E});var r=a(51855),n=a(9003),o=a(93379),i=a.n(o),s=a(7795),l=a.n(s),c=a(90569),d=a.n(c),u=a(3565),m=a.n(u),p=a(19216),h=a.n(p),b=a(44589),g=a.n(b),f=a(77550),y={};y.styleTagTransform=g(),y.setAttributes=m(),y.insert=d().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=h(),i()(f.Z,y),f.Z&&f.Z.locals&&f.Z.locals;var v=a(14469);const E=e=>{const[t,a]=(0,r.useState)(0),o=(0,r.useRef)(),[i,s]=n.Z.useParentSize(o),l=(0,v.Z)("(max-width:500px)"),c=(0,v.Z)("(max-width:400px)"),d=!e.contentIsNumber&&c?0:!e.contentIsNumber&&l?-50:2,u=(l||c)&&e.contentIsNumber?15:0,m=e.contentIsNumber?d+0+i:i,p=Math.min(s,l?i+d+u:m)/2.3;return(0,r.useEffect)((()=>{const e=function(e,t){const r={callback:()=>{a((e=>(e+1)%3))},desiredTime:Date.now()+t},n=()=>{r.cleared||(Date.now()>=r.desiredTime?r.callback():window.requestAnimationFrame(n))};return window.requestAnimationFrame(n),r}(0,2===t?3e3:0);return()=>{!function(e){e.cleared=!0}(e)}}),[t]),r.createElement("div",{ref:o,className:"spinner"+(()=>{switch(t){case 0:return" s0";case 1:return" s1";case 2:return" s2"}return""})(),style:{width:2*p,height:2*p}})}},55876:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var r=a(51855),n=a(5591),o=a(1564),i=a(39014),s=a(22405),l=a(49470),c=a(85945),d=a(69451),u=a(64469),m=a(51491),p=a(77478),h=a(64225),b=a(67506),g=a(93379),f=a.n(g),y=a(7795),v=a.n(y),E=a(90569),T=a.n(E),k=a(3565),w=a.n(k),P=a(19216),x=a.n(P),Z=a(44589),C=a.n(Z),N=a(25872),S={};S.styleTagTransform=C(),S.setAttributes=w(),S.insert=T().bind(null,"head"),S.domAPI=v(),S.insertStyleElement=x(),f()(N.Z,S),N.Z&&N.Z.locals&&N.Z.locals;var B=a(43691),R=a(61495),M=a(82311);const A=JSON.parse('{"areas":"Edit areas","addArea":"Add area","save":"Save","sureQuestion":"Are you sure?","confirmDelete":"Confirm","cancel":"Cancel","areaDeleted":"Area deleted ...","genericError":"An error occurred. Try again later.","nameTitle":"Name","smokerTitle":"Smoking","deleteTitle":"Delete"}'),O=JSON.parse('{"areas":"עריכת איזורים","addArea":"הוספת איזור","save":"שמירה","sureQuestion":"האם את/ה בטוח/ה?","confirmDelete":"אישור","cancel":"ביטול","areaDeleted":"האיזור נמחק ...","genericError":"אירעה שגיאה, נסה שנית מאוחר יותר.","nameTitle":"שם","smokerTitle":"מעשנים","deleteTitle":"מחיקה"}');var H=function(e,t,a,r){return new(a||(a=Promise))((function(n,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))};const I={en:A,he:O},z=()=>{const[e,t]=(0,r.useState)(null),[a,g]=(0,r.useState)(null),[f,y]=(0,r.useState)([]),[v,E]=(0,r.useState)(!1),[T,k]=(0,r.useState)(!1),{queueGroupId:w}=(0,n.UO)(),P=R.Z.useTranslationNamespace("area",(e=>Promise.resolve(I[e]))),x=(0,c.NL)(),Z=[{type:"smoker",icon:"cigarette"},{type:"handicapped",icon:"handicap"}],{enqueueSnackbar:C}=(0,h.Ds)(),{handleNotification:N}=(0,p.V)(),S=e=>e.sort(((e,t)=>e.id-t.id)).map((e=>({id:e.id,name:e.name,traits:e.traits.map((e=>({id:null,type:e.type})))})));(0,d.a)({queryKey:["areas",w],queryFn:()=>H(void 0,void 0,void 0,(function*(){return yield l.Z.queueGroup.area.get(w)})),onSuccess:e=>{const a=S(e),r=S(e);g(r),t(a)},onError:e=>{console.error(e)}});const A=(0,u.D)((e=>H(void 0,void 0,void 0,(function*(){yield l.Z.queueGroup.area.patch(w,e)}))),{onError:()=>{E(!0),N("error",C),setTimeout((()=>{E(!1)}),5e3)},onSuccess:()=>H(void 0,void 0,void 0,(function*(){yield x.invalidateQueries({queryKey:["areas"]}),y([]),k(!1),N("success",C)}))});return r.createElement("div",{className:"areaPage"},r.createElement(s.Z,null,r.createElement(B.Z,{hideBackButton:!0,menuProps:{canLogOut:!0}}),r.createElement(m.Z,{title:P("areas"),iconName:"layerGroup",cardContent:r.createElement(r.Fragment,null,r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,P("nameTitle")),r.createElement("th",null,P("smokerTitle")),r.createElement("th",null,P("deleteTitle")))),e&&e.map(((a,n)=>r.createElement("tbody",{key:n},r.createElement("tr",{className:"areaRow"},r.createElement("td",null,r.createElement(M.Z,{variant:"outlined",size:"small",value:a.name,disabled:f.some((e=>e===n)),onChange:r=>{const o=e.map(((e,t)=>t===n?{id:a.id,name:r.target.value,traits:a.traits}:e));t(o),r.target.value.length>0?k(!1):k(!0)}})),Z&&Z.map((o=>r.createElement("td",{key:o.type},r.createElement(b.Z,{customButtonType:"primary",disabled:f.some((e=>e===n)),outlined:!a.traits.some((e=>e.type===o.type)),iconProps:{iconName:o.icon},onClick:()=>{let r=e[n].traits;a.traits.some((e=>e.type===o.type))?r=r.filter((e=>e.type!==o.type)):r.push({type:o.type});const i=e.map(((e,t)=>t===n?{id:a.id,name:a.name,traits:r}:e));t(i)}})))),r.createElement("td",null,r.createElement(b.Z,{customButtonType:"attention",outlined:!f.some((e=>e===n)),iconProps:{iconName:"delete"},onClick:()=>{(e=>{f.some((t=>t===e))?y(f.filter((t=>t!==e))):y([...f,e])})(n)}}))))))),v&&r.createElement(o.c,{messageBarType:i.f.error},P("genericError"))),bottomPanel:JSON.stringify(e)!==JSON.stringify(a)||f.length>0?r.createElement(r.Fragment,null,r.createElement(b.Z,{customButtonType:"primary",text:P("addArea"),onClick:()=>{t([...e,{name:"",traits:[]}])}}),r.createElement(b.Z,{customButtonType:"secondary",text:P("save"),disabled:T,onClick:()=>{(()=>{k(!0);const t={delete:[],add:[],update:[]};t.delete=f.map((t=>e[t].id)).filter((e=>e)),t.add=e.filter(((e,t)=>!f.some((e=>e===t)))).filter((e=>!e.id)),t.update=e.filter(((e,t)=>!f.some((e=>e===t)))).filter((e=>e.id)),A.mutate(t)})()}})):r.createElement(b.Z,{customButtonType:"primary",text:P("addArea"),onClick:()=>{t([...e,{name:"",traits:[]}]),k(!0)}})})))}},9003:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(51855);const n={useParentSize:function(e){const[t,a]=(0,r.useState)(0),[n,o]=(0,r.useState)(0),i=e.current&&e.current.parentElement;return(0,r.useLayoutEffect)((()=>{if(!i)return()=>{};const e=()=>{const e=i.clientHeight,r=i.clientWidth;let s=e<=140?98:5;t!==e&&a(e+(e<=79?98:5)),n!==r&&o(r+s)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})),[n,t]}}},64469:(e,t,a)=>{a.d(t,{D:()=>m});var r=a(51855),n=a(464),o=a(89886),i=a(30081),s=a(33989),l=a(32161);class c extends s.l{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.client.defaultMutationOptions(e),(0,l.VS)(t,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){var e;this.listeners.length||null==(e=this.currentMutation)||e.removeObserver(this)}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:(0,o.R)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){i.V.batch((()=>{var t,a,r,n;if(this.mutateOptions)if(e.onSuccess)null==(t=(a=this.mutateOptions).onSuccess)||t.call(a,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(n=this.mutateOptions).onSettled)||r.call(n,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var o,i,s,l;null==(o=(i=this.mutateOptions).onError)||o.call(i,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(s=(l=this.mutateOptions).onSettled)||s.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach((e=>{e(this.currentResult)}))}))}}var d=a(85945),u=a(24798);function m(e,t,a){const o=(0,l.lV)(e,t,a),s=(0,d.NL)({context:o.context}),[m]=r.useState((()=>new c(s,o)));r.useEffect((()=>{m.setOptions(o)}),[m,o]);const h=(0,n.$)(r.useCallback((e=>m.subscribe(i.V.batchCalls(e))),[m]),(()=>m.getCurrentResult()),(()=>m.getCurrentResult())),b=r.useCallback(((e,t)=>{m.mutate(e,t).catch(p)}),[m]);if(h.error&&(0,u.L)(m.options.useErrorBoundary,[h.error]))throw h.error;return{...h,mutate:b,mutateAsync:h.mutate}}function p(){}}}]);