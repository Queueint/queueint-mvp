"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8316],{36801:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(28276),r=n.n(a),o=n(5368),l=n.n(o)()(r());l.push([e.id,'.backButton{display:inline-block;font-size:.8666em;height:1.5625em;color:#8692a6;background-color:transparent;border:0;cursor:pointer;font-family:"Poppins",sans-serif;padding:0;margin:0;font-weight:500}@media screen and (min-width: 852px){.backButton{font-size:.8421em}}.backButton:lang(he){font-family:"Assistant","sans-serif"}.backButton .icon{margin-inline-end:.375em}.backButton.placeholder{height:1.3em}',""]);const i=l},98153:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(28276),r=n.n(a),o=n(5368),l=n.n(o)()(r());l.push([e.id,".dialog{background-color:#fff;color:#000;padding:1em}",""]);const i=l},77550:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(28276),r=n.n(a),o=n(5368),l=n.n(o)()(r());l.push([e.id,".spinner{box-sizing:border-box;border-radius:100%;border-style:solid;border-width:2px;border-color:#8cdbff #8cdbff transparent transparent;border-top:0;position:absolute;top:50%;left:50%;pointer-events:none}.spinner.s0{transform:translate(-50%, -50%) rotate(0)}.spinner.s1{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(0)}.spinner.s2{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(360deg)}",""]);const i=l},93689:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(28276),r=n.n(a),o=n(5368),l=n.n(o)()(r());l.push([e.id,".shiftManager .card{position:relative;margin:0 1.2em 1.2em;background-color:#fff;border-radius:11px;overflow-y:auto;display:flex;flex-direction:column;gap:1rem;height:100%;box-sizing:border-box;flex-grow:1;scrollbar-color:#5bc6f9 #dadada;scrollbar-width:thin;border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:0}@media screen and (max-width: 380px){.shiftManager .card{gap:0rem;margin:0 1.2em 1.2em}}.shiftManager .card::-webkit-scrollbar{width:3pt}.shiftManager .card::-webkit-scrollbar-track{background-color:#dadada;border-radius:3pt}.shiftManager .card::-webkit-scrollbar-thumb{background-color:#5bc6f9;border-radius:3pt}.shiftManager .card::-webkit-scrollbar-thumb:hover{background-color:#3bb1e7}.shiftManager .backButton{font-size:1.0666em;margin-top:2em;padding-inline-start:1.09375em;color:#000}.shiftManager h1{font-size:1.2em;line-height:1.3333em;font-weight:700;text-align:start;margin-inline-start:1.6111em;margin-top:.8888em;margin-bottom:.6666em}.shiftManager table{font-size:1.2em;width:100%;border-collapse:collapse}.shiftManager table tr:nth-child(even){background-color:#f7f7f7}.shiftManager table th,.shiftManager table td{font-weight:600;text-align:center;padding:.8333em}.shiftManager table th:first-child,.shiftManager table td:first-child{text-align:start;padding-inline-start:1.6666em}.shiftManager table th:last-child,.shiftManager table td:last-child{padding-inline-end:1.6666em}.shiftManager table th{color:#9c9c9c}.shiftManager table td:last-child{display:flex;flex-flow:row nowrap;align-items:center;justify-content:center}.shiftManager table td:last-child i{font-size:.8em;margin-inline-end:.25em;color:#aeaeae}.shiftManager table td:not(:first-child){font-size:1.3888em}.shiftManager table .subtotal{border-top:1px solid #afafaf}.shiftManager table .subtotal td:first-child{font-weight:400;color:#8c8c8c}.shiftManager .buttonContainer{flex:0 0 3.53333em;background-color:#fff;width:100%;border-top:1px solid #dfdfdf;display:flex}.shiftManager .buttonContainer .button{font-size:1em;margin:.8em;flex:1}.shiftManager .buttonContainer .button .ms-Button-flexContainer{padding:.3333em;line-height:1.308em;height:1.3333em}.shiftManager .dialog{max-width:16.1333em;width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:5px;padding:1em}.shiftManager .dialog .ms-Button--icon{color:#5bc6f9;font-size:1.25em;min-height:0;width:auto}.shiftManager .dialog .ms-Button--icon .ms-Button-flexContainer{padding:0}.shiftManager .dialog .ms-Button--icon .ms-Icon{margin:0;padding-inline-start:0;height:1em}.shiftManager .dialog .ms-Button--icon .ms-Icon svg{width:auto;height:1em}.shiftManager .dialog .MuiTextField-root{margin-top:1em}.shiftManager .dialog .button{width:100%;font-size:1em;margin-top:1.3333em}.shiftManager .dialog .button .ms-Button-flexContainer{padding:.3333em;line-height:1.308em;height:1.3333em}",""]);const i=l},14469:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(51855),r=n(26154),o=n(47562),l=n(78451);function i(e,t={}){const n=(0,r.Z)(),i="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:s=!1,matchMedia:c=(i?window.matchMedia:null),noSsr:u=!1,ssrMatchMedia:d=null}=(0,o.Z)({name:"MuiUseMediaQuery",props:t,theme:n});let m="function"==typeof e?e(n):e;m=m.replace(/^@media( ?)/m,"");const[h,f]=a.useState((()=>u&&i?c(m).matches:d?d(m).matches:s));return(0,l.Z)((()=>{let e=!0;if(!i)return;const t=c(m),n=()=>{e&&f(t.matches)};return n(),t.addListener(n),()=>{e=!1,t.removeListener(n)}}),[m,c,i]),h}},22405:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(51855),r=n(5591),o=n(72220),l=n(19350);const i=e=>{const t=(0,r.s0)(),n=function(){const[,e]=(0,a.useState)(0);return()=>{e((e=>e+1))}}(),i=sessionStorage.getItem("authToken"),s=localStorage.getItem("credentialToken");return(0,a.useEffect)((()=>{let e=null;return i||(s?(0,o.Z)({credentialTokenUuid:s}).catch((()=>{localStorage.removeItem("credentialToken")})).finally((()=>{n()})):e=setTimeout((()=>{t("/login",{replace:!0})}),3e3)),()=>{e&&clearTimeout(e)}}),[i,s]),i?a.createElement(a.Fragment,null,e.children):s?a.createElement("div",{className:"narrowContent paddedContent"},a.createElement("h1",null,"טוען"),a.createElement(l.Z,null)):a.createElement("div",{className:"narrowContent paddedContent"},a.createElement("h1",null,"אין לך הרשאה לעמוד זה"))}},96816:(e,t,n)=>{n.d(t,{Z:()=>Z});var a=n(51855),r=n(38032),o=n(2490),l=n(61495),i=n(93379),s=n.n(i),c=n(7795),u=n.n(c),d=n(90569),m=n.n(d),h=n(3565),f=n.n(h),b=n(19216),g=n.n(b),p=n(44589),E=n.n(p),k=n(36801),v={};v.styleTagTransform=E(),v.setAttributes=f(),v.insert=m().bind(null,"head"),v.domAPI=u(),v.insertStyleElement=g(),s()(k.Z,v),k.Z&&k.Z.locals&&k.Z.locals;const w={en:{back:"Back"},he:{back:"חזור"}},Z=e=>{const t=(0,a.useContext)(o.r),n=l.Z.useTranslationNamespace("backButton",(e=>Promise.resolve(w[e]))),i=l.Z.useIsRtl(),s=!!e.override,c=t=>(e.className||"").split(" ").concat(t).join(" ");return t.canGoBack||s?a.createElement("button",{className:c("backButton"),type:"button",onClick:s?e.override:t.goBack},a.createElement(r.J,{iconName:i?"chevronRight":"chevronLeft",className:"icon"}),n("back")):a.createElement("div",{className:c("backButton placeholder")})}},19350:(e,t,n)=>{n.d(t,{Z:()=>v});var a=n(51855),r=n(9003),o=n(93379),l=n.n(o),i=n(7795),s=n.n(i),c=n(90569),u=n.n(c),d=n(3565),m=n.n(d),h=n(19216),f=n.n(h),b=n(44589),g=n.n(b),p=n(77550),E={};E.styleTagTransform=g(),E.setAttributes=m(),E.insert=u().bind(null,"head"),E.domAPI=s(),E.insertStyleElement=f(),l()(p.Z,E),p.Z&&p.Z.locals&&p.Z.locals;var k=n(14469);const v=e=>{const[t,n]=(0,a.useState)(0),o=(0,a.useRef)(),[l,i]=r.Z.useParentSize(o),s=(0,k.Z)("(max-width:500px)"),c=(0,k.Z)("(max-width:400px)"),u=!e.contentIsNumber&&c?0:!e.contentIsNumber&&s?-50:2,d=(s||c)&&e.contentIsNumber?15:0,m=e.contentIsNumber?u+0+l:l,h=Math.min(i,s?l+u+d:m)/2.3;return(0,a.useEffect)((()=>{const e=function(e,t){const a={callback:()=>{n((e=>(e+1)%3))},desiredTime:Date.now()+t},r=()=>{a.cleared||(Date.now()>=a.desiredTime?a.callback():window.requestAnimationFrame(r))};return window.requestAnimationFrame(r),a}(0,2===t?3e3:0);return()=>{!function(e){e.cleared=!0}(e)}}),[t]),a.createElement("div",{ref:o,className:"spinner"+(()=>{switch(t){case 0:return" s0";case 1:return" s1";case 2:return" s2"}return""})(),style:{width:2*h,height:2*h}})}},18316:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var a=n(51855),r=n(38032),o=n(9249),l=n(49470),i=n(10571),s=n(22405),c=n(43691),u=n(96816),d=n(61495);const m=JSON.parse('{"customersInQueue":"Customers in queue","area":"Area","tables":"Tables","people":"People","totalWaiting":"Total waiting:","tableCheckout":"Table checked out","tableNumber":"Table number","peopleCount":"People amount","sendToHost":"Send to hostess"}'),h=JSON.parse('{"customersInQueue":"לקוחות בתור","area":"איזור","tables":"שולחנות","people":"אנשים","totalWaiting":"סה\\"כ ממתינים:","tableCheckout":"שולחן שילם חשבון","tableNumber":"שולחן מספר","peopleCount":"כמות אנשים","sendToHost":"שלח למארחת"}');var f=n(93379),b=n.n(f),g=n(7795),p=n.n(g),E=n(90569),k=n.n(E),v=n(3565),w=n.n(v),Z=n(19216),M=n.n(Z),C=n(44589),y=n.n(C),x=n(93689),N={};N.styleTagTransform=y(),N.setAttributes=w(),N.insert=k().bind(null,"head"),N.domAPI=p(),N.insertStyleElement=M(),b()(x.Z,N),x.Z&&x.Z.locals&&x.Z.locals;var T=n(67506),I=n(18418),S=n(98153),B={};B.styleTagTransform=y(),B.setAttributes=w(),B.insert=k().bind(null,"head"),B.domAPI=p(),B.insertStyleElement=M(),b()(S.Z,B),S.Z&&S.Z.locals&&S.Z.locals;const q=e=>e.hidden?a.createElement(a.Fragment,null):a.createElement(I.a,{isDarkThemed:e.overlayDarkThemed,onClick:e.onOverlayClick},a.createElement("div",{className:"dialog",onClick:e=>e.stopPropagation()},e.children));var z=n(82311);const P={en:m,he:h},A=()=>{const[e,t]=(0,a.useState)(null),[n,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),[b,g]=(0,a.useState)(1),[p,E]=(0,a.useState)(!1),k=e&&e.queueGroupId,v=e&&e.queueId,w=e&&e.areas,Z=e&&e.total.tables,M=e&&e.total.people,C=()=>{f(""),g(1)},y=d.Z.useTranslationNamespace("restaurantShiftManager",(e=>Promise.resolve(P[e]))),x=()=>{l.Z.queueGroup.analytic.getShift().then((e=>{t({queueGroupId:e.queueGroupId,queueId:e.queueId,areas:e.areas.map((e=>({id:e.id,name:e.name,tables:e.queueCustomerCount,people:e.peopleCount}))),total:{tables:e.total.queueCustomerCount,people:e.total.peopleCount}})})).catch((e=>{console.error(e)}))};return(0,a.useEffect)((()=>{x()}),[]),i.Z.useWs(`queueGroup/${encodeURIComponent(k)}/queue/${encodeURIComponent(v)}`,(()=>{x()}),[k,v]),a.createElement(s.Z,null,a.createElement("div",{className:"shiftManager"},a.createElement(c.Z,{hideBackButton:!0,menuProps:{canLogOut:!0}}),a.createElement("div",{className:"fullHeight flexColumn"},a.createElement("div",{className:"card"},a.createElement(u.Z,null),a.createElement("h1",null,y("customersInQueue")),a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,y("area")),a.createElement("th",null,y("tables")),a.createElement("th",null,y("people")))),a.createElement("tbody",null,(w||[]).map((e=>a.createElement("tr",{key:e.id},a.createElement("td",null,e.name),a.createElement("td",null,e.tables),a.createElement("td",null,a.createElement(r.J,{iconName:"person"}),e.people)))),a.createElement("tr",{className:"subtotal"},a.createElement("td",null,y("totalWaiting")),a.createElement("td",null,Z),a.createElement("td",null,a.createElement(r.J,{iconName:"person"}),M))))),a.createElement("div",{className:"buttonContainer"},a.createElement(T.Z,{customButtonType:"primary",text:y("tableCheckout"),onClick:()=>m(!0),disabled:p}))),n&&a.createElement(q,{overlayDarkThemed:!0,onOverlayClick:()=>{m(!1),C()}},a.createElement("form",{onSubmit:e=>{e.preventDefault(),p||(E(!0),l.Z.queueGroup.queue.checkoutTable(k,v,{tableId:h,peopleCount:b}).then((()=>{m(!1),C()})).finally((()=>{E(!1)})))}},a.createElement(o.h,{iconProps:{iconName:"times"},onClick:()=>{m(!1),C()}}),a.createElement(z.Z,{variant:"outlined",value:h,onChange:e=>f(e.target.value),required:!0,fullWidth:!0,size:"small",label:y("tableNumber")}),a.createElement(z.Z,{variant:"outlined",value:b,onChange:e=>{const{value:t}=e.target;isNaN(Number(t))||g(Number(t))},required:!0,fullWidth:!0,size:"small",type:"number",label:y("peopleCount")}),a.createElement(T.Z,{type:"submit",customButtonType:"primary",text:y("sendToHost")})))))}},10571:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(51855),r=n(42742);const o={useWs:function(e,t,n=[]){(0,a.useEffect)((()=>(r.Z.subscribe(e,t),()=>{r.Z.unsubscribe(e,t)})),n)}}},9003:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(51855);const r={useParentSize:function(e){const[t,n]=(0,a.useState)(0),[r,o]=(0,a.useState)(0),l=e.current&&e.current.parentElement;return(0,a.useLayoutEffect)((()=>{if(!l)return()=>{};const e=()=>{const e=l.clientHeight,a=l.clientWidth;let i=e<=140?98:5;t!==e&&n(e+(e<=79?98:5)),r!==a&&o(a+i)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})),[r,t]}}}}]);