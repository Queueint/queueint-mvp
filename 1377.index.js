"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1377],{36801:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(28276),n=r.n(a),o=r(5368),s=r.n(o)()(n());s.push([e.id,'.backButton{display:inline-block;font-size:.8666em;height:1.5625em;color:#8692a6;background-color:transparent;border:0;cursor:pointer;font-family:"Poppins",sans-serif;padding:0;margin:0;font-weight:500}@media screen and (min-width: 852px){.backButton{font-size:.8421em}}.backButton:lang(he){font-family:"Assistant","sans-serif"}.backButton .icon{margin-inline-end:.375em}.backButton.placeholder{height:1.3em}',""]);const i=s},13395:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(28276),n=r.n(a),o=r(5368),s=r.n(o)()(n());s.push([e.id,".buttonGroup :first-child:not(:last-child).ms-Button,.buttonGroup :first-child:not(:last-child) .ms-Button{border-start-end-radius:0;border-end-end-radius:0}.buttonGroup :not(:first-child):not(:last-child).ms-Button,.buttonGroup :not(:first-child):not(:last-child) .ms-Button{border-radius:0}.buttonGroup :last-child:not(:first-child).ms-Button,.buttonGroup :last-child:not(:first-child) .ms-Button{border-start-start-radius:0;border-end-start-radius:0}",""]);const i=s},5199:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(28276),n=r.n(a),o=r(5368),s=r.n(o)()(n());s.push([e.id,'.cardPage{display:flex;flex-direction:column}.cardPage.withBottomPanel .card{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:0}.cardPage .card{position:relative;margin:0 1.2em 1.2em;background-color:#fff;border-radius:11px;overflow-y:auto;display:flex;flex-direction:column;gap:1rem;height:100%;box-sizing:border-box;flex-grow:1;scrollbar-color:#5bc6f9 #dadada;scrollbar-width:thin}@media screen and (max-width: 380px){.cardPage .card{gap:0rem;margin:0 1.2em 1.2em}}.cardPage .card::-webkit-scrollbar{width:3pt}.cardPage .card::-webkit-scrollbar-track{background-color:#dadada;border-radius:3pt}.cardPage .card::-webkit-scrollbar-thumb{background-color:#5bc6f9;border-radius:3pt}.cardPage .card::-webkit-scrollbar-thumb:hover{background-color:#3bb1e7}.cardPage .card .cardTop{border-bottom:1px solid #f1f1f1}.cardPage .card .cardTop .backButton{margin-top:2.0212em;font-size:1.0666em;line-height:1.3081em;color:#000;margin-inline-start:1.0937em}.cardPage .card .cardTop .cardTopHeader{display:flex;align-items:center;justify-content:center;text-align:start;margin-left:1.36667em;margin-right:1.36667em;margin-bottom:1.73333em}.cardPage .card .cardTop .cardTopHeader .titleContainer{display:flex;align-items:center;justify-content:center;margin:2rem auto 0rem auto;gap:1rem}.cardPage .card .cardTop .cardTopHeader .titleContainer:lang(he){font-family:"Assistant","sans-serif"}@media screen and (max-width: 500px){.cardPage .card .cardTop .cardTopHeader .titleContainer:lang(he){margin:2rem 0 0rem auto}}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout{line-height:1.3333em;padding:1em .8333em 1.5em;translate:0 50%;max-width:36em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout.ms-Callout{font-size:.8em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout button{background-color:transparent;border:0;cursor:pointer;color:#5bc6f9;font-size:.7708em;padding:0 0 1.1621em 1.1621em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout button i{height:1em;width:1em}.cardPage .card .cardTop .cardTopHeader button{background-color:#5fcf90;border-radius:50%;border-style:none;color:#fff;margin-inline-start:.4125em;line-height:1em;padding:.25em .63em;cursor:pointer}.cardPage .card .cardTop .cardTopHeader .cardTopHeaderText{font-size:1.66667em;font-weight:700;margin:0}@media screen and (max-width: 500px){.cardPage .card .cardTop .cardTopHeader .cardTopHeaderText{font-size:1.3em}}.cardPage .card .cardTop .cardTopHeader .titleIcon{font-size:1.7333em;margin-left:.32em;margin-right:.32em}.cardPage .buttonContainer{flex:0 0 3.53333em;background-color:#fff;width:100%;border-top:1px solid #dfdfdf;display:flex}.cardPage .buttonContainer .button{font-size:1em;margin:.8em;flex:1}.cardPage .buttonContainer .button .ms-Button-flexContainer{padding:.3333em;line-height:1.308em;height:1.3333em}',""]);const i=s},77550:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(28276),n=r.n(a),o=r(5368),s=r.n(o)()(n());s.push([e.id,".spinner{box-sizing:border-box;border-radius:100%;border-style:solid;border-width:2px;border-color:#8cdbff #8cdbff transparent transparent;border-top:0;position:absolute;top:50%;left:50%;pointer-events:none}.spinner.s0{transform:translate(-50%, -50%) rotate(0)}.spinner.s1{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(0)}.spinner.s2{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(360deg)}",""]);const i=s},52401:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(28276),n=r.n(a),o=r(5368),s=r.n(o)()(n());s.push([e.id,".businessPermissionsPage .cardContent{padding:1em}",""]);const i=s},22405:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(51855),n=r(5591),o=r(72220),s=r(19350);const i=e=>{const t=(0,n.s0)(),r=function(){const[,e]=(0,a.useState)(0);return()=>{e((e=>e+1))}}(),i=sessionStorage.getItem("authToken"),c=localStorage.getItem("credentialToken");return(0,a.useEffect)((()=>{let e=null;return i||(c?(0,o.Z)({credentialTokenUuid:c}).catch((()=>{localStorage.removeItem("credentialToken")})).finally((()=>{r()})):e=setTimeout((()=>{t("/login",{replace:!0})}),3e3)),()=>{e&&clearTimeout(e)}}),[i,c]),i?a.createElement(a.Fragment,null,e.children):c?a.createElement("div",{className:"narrowContent paddedContent"},a.createElement("h1",null,"טוען"),a.createElement(s.Z,null)):a.createElement("div",{className:"narrowContent paddedContent"},a.createElement("h1",null,"אין לך הרשאה לעמוד זה"))}},96816:(e,t,r)=>{r.d(t,{Z:()=>T});var a=r(51855),n=r(38032),o=r(2490),s=r(61495),i=r(93379),c=r.n(i),l=r(7795),d=r.n(l),m=r(90569),u=r.n(m),p=r(3565),b=r.n(p),g=r(19216),h=r.n(g),f=r(44589),E=r.n(f),v=r(36801),w={};w.styleTagTransform=E(),w.setAttributes=b(),w.insert=u().bind(null,"head"),w.domAPI=d(),w.insertStyleElement=h(),c()(v.Z,w),v.Z&&v.Z.locals&&v.Z.locals;const k={en:{back:"Back"},he:{back:"חזור"}},T=e=>{const t=(0,a.useContext)(o.r),r=s.Z.useTranslationNamespace("backButton",(e=>Promise.resolve(k[e]))),i=s.Z.useIsRtl(),c=!!e.override,l=t=>(e.className||"").split(" ").concat(t).join(" ");return t.canGoBack||c?a.createElement("button",{className:l("backButton"),type:"button",onClick:c?e.override:t.goBack},a.createElement(n.J,{iconName:i?"chevronRight":"chevronLeft",className:"icon"}),r("back")):a.createElement("div",{className:l("backButton placeholder")})}},11139:(e,t,r)=>{r.d(t,{Z:()=>v});var a=r(51855),n=r(14386),o=r(93379),s=r.n(o),i=r(7795),c=r.n(i),l=r(90569),d=r.n(l),m=r(3565),u=r.n(m),p=r(19216),b=r.n(p),g=r(44589),h=r.n(g),f=r(13395),E={};E.styleTagTransform=h(),E.setAttributes=u(),E.insert=d().bind(null,"head"),E.domAPI=c(),E.insertStyleElement=b(),s()(f.Z,E),f.Z&&f.Z.locals&&f.Z.locals;const v=e=>a.createElement(n.K,Object.assign({},e,{className:("buttonGroup",(e.className||"").split(" ").concat("buttonGroup").join(" "))}),e.children)},51491:(e,t,r)=>{r.d(t,{Z:()=>T});var a=r(51855),n=r(38032),o=r(96816),s=r(34297),i=r(1285),c=r(93379),l=r.n(c),d=r(7795),m=r.n(d),u=r(90569),p=r.n(u),b=r(3565),g=r.n(b),h=r(19216),f=r.n(h),E=r(44589),v=r.n(E),w=r(5199),k={};k.styleTagTransform=v(),k.setAttributes=g(),k.insert=p().bind(null,"head"),k.domAPI=m(),k.insertStyleElement=f(),l()(w.Z,k),w.Z&&w.Z.locals&&w.Z.locals;const T=e=>{const[t,r]=(0,a.useState)(!1);return a.createElement("div",{className:(c="fullHeight cardPage"+(e.bottomPanel?" withBottomPanel":""),(e.className||"").split(" ").concat(c).join(" "))},a.createElement("div",{className:"card"},a.createElement("div",{className:"cardTop"},!e.hideBack&&a.createElement(o.Z,{override:e.backButtonOverride}),a.createElement("div",{className:"cardTopHeader"},a.createElement("div",{className:"titleContainer"},e.iconName?a.createElement(n.J,{iconName:e.iconName,className:"titleIcon"}):null,a.createElement("h1",{className:"cardTopHeaderText"},e.title)),e.layerInfo?a.createElement(a.Fragment,null,a.createElement("button",{id:"layerGroupInfoButton",type:"button",onClick:()=>r(!0)},"i"),t&&a.createElement(s.U,{className:"customerDetailCallout",target:".seatSetting__numinput-container",onDismiss:()=>r(!1),directionalHint:i.b.topCenter},a.createElement("button",{type:"button",onClick:()=>r(!1)},a.createElement(n.J,{iconName:"times"})),a.createElement("div",null,e.callout))):null)),e.cardContent),e.bottomPanel&&a.createElement("div",{className:e.bottomPanelClass?e.bottomPanelClass:"buttonContainer"},e.bottomPanel));var c}},19350:(e,t,r)=>{r.d(t,{Z:()=>w});var a=r(51855),n=r(9003),o=r(93379),s=r.n(o),i=r(7795),c=r.n(i),l=r(90569),d=r.n(l),m=r(3565),u=r.n(m),p=r(19216),b=r.n(p),g=r(44589),h=r.n(g),f=r(77550),E={};E.styleTagTransform=h(),E.setAttributes=u(),E.insert=d().bind(null,"head"),E.domAPI=c(),E.insertStyleElement=b(),s()(f.Z,E),f.Z&&f.Z.locals&&f.Z.locals;var v=r(14469);const w=e=>{const[t,r]=(0,a.useState)(0),o=(0,a.useRef)(),[s,i]=n.Z.useParentSize(o),c=(0,v.Z)("(max-width:500px)"),l=(0,v.Z)("(max-width:400px)"),d=!e.contentIsNumber&&l?0:!e.contentIsNumber&&c?-50:2,m=(c||l)&&e.contentIsNumber?15:0,u=e.contentIsNumber?d+0+s:s,p=Math.min(i,c?s+d+m:u)/2.3;return(0,a.useEffect)((()=>{const e=function(e,t){const a={callback:()=>{r((e=>(e+1)%3))},desiredTime:Date.now()+t},n=()=>{a.cleared||(Date.now()>=a.desiredTime?a.callback():window.requestAnimationFrame(n))};return window.requestAnimationFrame(n),a}(0,2===t?3e3:0);return()=>{!function(e){e.cleared=!0}(e)}}),[t]),a.createElement("div",{ref:o,className:"spinner"+(()=>{switch(t){case 0:return" s0";case 1:return" s1";case 2:return" s2"}return""})(),style:{width:2*p,height:2*p}})}},71377:(e,t,r)=>{r.r(t),r.d(t,{default:()=>J});var a=r(51855),n=r(5591),o=r(57160),s=r(14386),i=r(94369),c=r(9249),l=r(31223),d=r(1564),m=r(39014),u=r(49470),p=r(11139),b=r(22405),g=r(51491),h=r(67506),f=r(69451),E=r(64469),v=r(97928),w=r(64225),k=r(77478);const T=["canManagePermissions","canManageQueue","isOwner"];var y=r(43691),P=r(61495);const Z=JSON.parse('{"addWorker":"Add worker","email":"Email","emailInvalid":"Invalid email","requiredField":"Required field","cancel":"Cancel","add":"Add","delete":"Delete","save":"Save","permissions":"Permissions","permissionsExplanation":"Workers can use the system, and permissions can be configured for each worker.","saveSuccess":"Changes saved successfully!","saveError/not allowed":"You\'re unauthorized. Try re-entering the system.","saveError/lacking owner":"At least one user needs to be owner.","saveError/dont touch owners":"You\'re not authorized to change owner permissions.","saveError/generic":"An error occurred, try again later.","permission/canManagePermissions":"Permission manager","permission/canManageQueue":"Queue manager","permission/isOwner":"Owner"}'),x=JSON.parse('{"addWorker":"הוסף עובד","email":"דואר אלקטרוני","emailInvalid":"דוא\\"ל לא תקין","requiredField":"שדה חובה","cancel":"ביטול","add":"הוספה","delete":"מחיקה","save":"שמירה","permissions":"הרשאות","permissionsExplanation":"העובדים יכולים להשתמש במערכת, וניתן להגדיר הרשאות פרטניות לכל עובד.","saveSuccess":"השינויים נשמרו בהצלחה!","saveError/not allowed":"אין לך הרשאה. נסה להיכנס למערכת מחדש.","saveError/lacking owner":"חייב להיות לפחות משתמש אחד עם הרשאת בעלים.","saveError/dont touch owners":"אין לך הרשאה לשנות הרשאות של בעלים.","saveError/generic":"אירעה שגיאה, נסה שנית מאוחר יותר.","permission/canManagePermissions":"ניהול הרשאות","permission/canManageQueue":"ניהול תורים","permission/isOwner":"בעלים"}');var C=r(82311),N=r(93379),S=r.n(N),B=r(7795),I=r.n(B),z=r(90569),A=r.n(z),H=r(3565),G=r.n(H),q=r(19216),O=r.n(q),D=r(44589),L=r.n(D),F=r(52401),M={};M.styleTagTransform=L(),M.setAttributes=G(),M.insert=A().bind(null,"head"),M.domAPI=I(),M.insertStyleElement=O(),S()(F.Z,M),F.Z&&F.Z.locals&&F.Z.locals;const j={en:Z,he:x},W=e=>{const[t,r]=(0,a.useState)(!1),[n,o]=(0,a.useState)(""),s=P.Z.useTranslationNamespace("permissions",(e=>Promise.resolve(j[e])));if(!t)return a.createElement(h.Z,{customButtonType:"primary",text:s("addWorker"),onClick:()=>r(!0),disabled:e.disabled,style:{width:"100%"}});const i=""===n?s("requiredField"):v.Z.isEmail(n)?"":s("emailInvalid");return a.createElement("form",{onSubmit:t=>{t.preventDefault(),!e.disabled&&""!==n&&v.Z.isEmail(n)&&(e.onAddUser(n),o(""),r(!1))}},a.createElement(C.Z,{variant:"outlined",size:"small",fullWidth:!0,label:s("email"),value:n,type:"email",onChange:e=>o(e.target.value),validateOnLoad:!1,disabled:e.disabled,error:""!==i,helperText:i}),a.createElement(p.Z,{horizontal:!0},a.createElement(h.Z,{text:s("cancel"),disabled:e.disabled,style:{flexGrow:1},iconProps:{iconName:"times"},onClick:()=>{o(""),r(!1)}}),a.createElement(h.Z,{customButtonType:"primary",type:"submit",text:s("add"),iconProps:{iconName:"plus"},disabled:e.disabled,style:{flexGrow:1}})))},J=()=>{const[e,t]=(0,a.useState)([]),[r,p]=(0,a.useState)(""),{queueGroupId:v}=(0,n.UO)(),{enqueueSnackbar:Z}=(0,w.Ds)(),{handleNotification:x}=(0,k.V)(),C=P.Z.useTranslationNamespace("permissions",(e=>Promise.resolve(j[e]))),N=T.map((e=>({key:e,text:C(`permission/${e}`)})));(0,f.a)({queryKey:["queuegroup",v],queryFn:()=>u.Z.queueGroup.get(v),onSuccess:e=>{t(e.permissions)},onError:e=>{console.log(e.message)}});const{mutate:S,isLoading:B,isSuccess:I,isError:z}=(0,E.D)((()=>u.Z.queueGroup.permission.put(v,e)),{onError:e=>{if(x("error",Z),403===e.response.status)p("not allowed");else switch(e.response.data){case"lacking owner":p("lacking owner");break;case"dont touch owners":p("dont touch owners")}},onSuccess:()=>{x("success",Z)}});return a.createElement(b.Z,null,a.createElement(y.Z,{hideBackButton:!0,menuProps:{canLogOut:!0}}),a.createElement(g.Z,{className:"businessPermissionsPage",title:C("permissions"),cardContent:a.createElement("div",{className:"cardContent"},a.createElement("p",null,C("permissionsExplanation")),a.createElement(W,{disabled:B,onAddUser:e=>{t((t=>t.find((t=>t.userEmail.trim().toLowerCase()===e.trim().toLowerCase()))?t:[...t,{userEmail:e,queueGroupId:v,canManageQueue:!1,canManagePermissions:!1,isOwner:!1}]))}}),a.createElement(o.a,{style:{marginTop:"1em"},items:e,onRenderCell:(r,n)=>a.createElement(a.Fragment,null,a.createElement(s.K,{horizontal:!0},a.createElement(s.K.Item,{grow:1,style:{overflowX:"auto",width:0}},r.userEmail),a.createElement(i.L,{placeholder:C("permissions"),multiSelect:!0,disabled:B,selectedKeys:T.filter((e=>r[e])),onChange:(e,a)=>{t((e=>{const t=e.findIndex((e=>e===r));return-1===t?e:[...e.slice(0,t),Object.assign(Object.assign({},e[t]),{[a.key]:a.selected}),...e.slice(t+1)]}))},options:N}),a.createElement(c.h,{type:"button",title:C("delete"),disabled:B,style:{color:"red"},iconProps:{iconName:"delete"},onClick:()=>{t((e=>{const t=e.findIndex((e=>e===r));return-1===t?e:[...e.slice(0,t),...e.slice(t+1)]}))}})),n+1<e.length&&a.createElement(l.Z,null))}),I&&a.createElement(d.c,{messageBarType:m.f.success},C("saveSuccess")),z&&a.createElement(d.c,{messageBarType:m.f.error},(()=>{switch(r){case"not allowed":case"lacking owner":case"dont touch owners":return C(`saveError/${r}`)}return C("saveError/generic")})())),bottomPanel:a.createElement(h.Z,{customButtonType:"primary",text:C("save"),onClick:()=>{p(""),S()},iconProps:{iconName:"save"}})}))}},9003:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(51855);const n={useParentSize:function(e){const[t,r]=(0,a.useState)(0),[n,o]=(0,a.useState)(0),s=e.current&&e.current.parentElement;return(0,a.useLayoutEffect)((()=>{if(!s)return()=>{};const e=()=>{const e=s.clientHeight,a=s.clientWidth;let i=e<=140?98:5;t!==e&&r(e+(e<=79?98:5)),n!==a&&o(a+i)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})),[n,t]}}}}]);