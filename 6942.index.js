"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6942],{36801:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(28276),r=t.n(n),o=t(5368),i=t.n(o)()(r());i.push([e.id,'.backButton{display:inline-block;font-size:.8666em;height:1.5625em;color:#8692a6;background-color:transparent;border:0;cursor:pointer;font-family:"Poppins",sans-serif;padding:0;margin:0;font-weight:500}@media screen and (min-width: 852px){.backButton{font-size:.8421em}}.backButton:lang(he){font-family:"Assistant","sans-serif"}.backButton .icon{margin-inline-end:.375em}.backButton.placeholder{height:1.3em}',""]);const l=i},5199:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(28276),r=t.n(n),o=t(5368),i=t.n(o)()(r());i.push([e.id,'.cardPage{display:flex;flex-direction:column}.cardPage.withBottomPanel .card{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:0}.cardPage .card{position:relative;margin:0 1.2em 1.2em;background-color:#fff;border-radius:11px;overflow-y:auto;display:flex;flex-direction:column;gap:1rem;height:100%;box-sizing:border-box;flex-grow:1;scrollbar-color:#5bc6f9 #dadada;scrollbar-width:thin}@media screen and (max-width: 380px){.cardPage .card{gap:0rem;margin:0 1.2em 1.2em}}.cardPage .card::-webkit-scrollbar{width:3pt}.cardPage .card::-webkit-scrollbar-track{background-color:#dadada;border-radius:3pt}.cardPage .card::-webkit-scrollbar-thumb{background-color:#5bc6f9;border-radius:3pt}.cardPage .card::-webkit-scrollbar-thumb:hover{background-color:#3bb1e7}.cardPage .card .cardTop{border-bottom:1px solid #f1f1f1}.cardPage .card .cardTop .backButton{margin-top:2.0212em;font-size:1.0666em;line-height:1.3081em;color:#000;margin-inline-start:1.0937em}.cardPage .card .cardTop .cardTopHeader{display:flex;align-items:center;justify-content:center;text-align:start;margin-left:1.36667em;margin-right:1.36667em;margin-bottom:1.73333em}.cardPage .card .cardTop .cardTopHeader .titleContainer{display:flex;align-items:center;justify-content:center;margin:2rem auto 0rem auto;gap:1rem}.cardPage .card .cardTop .cardTopHeader .titleContainer:lang(he){font-family:"Assistant","sans-serif"}@media screen and (max-width: 500px){.cardPage .card .cardTop .cardTopHeader .titleContainer:lang(he){margin:2rem 0 0rem auto}}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout{line-height:1.3333em;padding:1em .8333em 1.5em;translate:0 50%;max-width:36em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout.ms-Callout{font-size:.8em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout button{background-color:transparent;border:0;cursor:pointer;color:#5bc6f9;font-size:.7708em;padding:0 0 1.1621em 1.1621em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout button i{height:1em;width:1em}.cardPage .card .cardTop .cardTopHeader button{background-color:#5fcf90;border-radius:50%;border-style:none;color:#fff;margin-inline-start:.4125em;line-height:1em;padding:.25em .63em;cursor:pointer}.cardPage .card .cardTop .cardTopHeader .cardTopHeaderText{font-size:1.66667em;font-weight:700;margin:0}@media screen and (max-width: 500px){.cardPage .card .cardTop .cardTopHeader .cardTopHeaderText{font-size:1.3em}}.cardPage .card .cardTop .cardTopHeader .titleIcon{font-size:1.7333em;margin-left:.32em;margin-right:.32em}.cardPage .buttonContainer{flex:0 0 3.53333em;background-color:#fff;width:100%;border-top:1px solid #dfdfdf;display:flex}.cardPage .buttonContainer .button{font-size:1em;margin:.8em;flex:1}.cardPage .buttonContainer .button .ms-Button-flexContainer{padding:.3333em;line-height:1.308em;height:1.3333em}',""]);const l=i},77550:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(28276),r=t.n(n),o=t(5368),i=t.n(o)()(r());i.push([e.id,".spinner{box-sizing:border-box;border-radius:100%;border-style:solid;border-width:2px;border-color:#8cdbff #8cdbff transparent transparent;border-top:0;position:absolute;top:50%;left:50%;pointer-events:none}.spinner.s0{transform:translate(-50%, -50%) rotate(0)}.spinner.s1{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(0)}.spinner.s2{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(360deg)}",""]);const l=i},440:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(28276),r=t.n(n),o=t(5368),i=t.n(o)()(r());i.push([e.id,'.spinnerInput{display:inline-flex;justify-content:space-between;align-items:center;border-radius:1.5em/50%;border:1px solid #ddd;padding:.214em .5333em}.spinnerInput .circleButton{font-size:.8em;padding:.3333em;background-color:#5fcf90}.spinnerInput .spinnerValue{font-size:1.6em;line-height:1em;margin:0 .7916em}.spinnerInput input{border-style:none;text-align:center;font-size:1.6em;font-family:"Poppins",sans-serif;width:2.2em;height:1.4em;padding:0;margin:0;-moz-appearance:textfield}.spinnerInput input::-webkit-outer-spin-button,.spinnerInput input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}',""]);const l=i},65567:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(28276),r=t.n(n),o=t(5368),i=t.n(o)()(r());i.push([e.id,".tablePage .cardPage .card .cardContent,.tablePage .cardPage .card .singleTable{padding:10px;display:flex;flex-direction:column;gap:20px;align-items:center}.tablePage .cardPage .card .cardContent .capacityButtons,.tablePage .cardPage .card .cardContent .areaGroup,.tablePage .cardPage .card .singleTable .capacityButtons,.tablePage .cardPage .card .singleTable .areaGroup{width:80%}.tablePage .cardPage .card .cardContent .areaGroup .areaGroupTitle p,.tablePage .cardPage .card .singleTable .areaGroup .areaGroupTitle p{text-align:center}.tablePage .cardPage .card .cardContent .areaGroup .areaList,.tablePage .cardPage .card .singleTable .areaGroup .areaList{display:grid;width:-moz-fit-content;width:fit-content;grid-template-columns:1fr 1fr;column-gap:5rem;row-gap:20px;margin:auto}.tablePage .cardPage .card .cardContent .areaGroup .areaList .areaCell,.tablePage .cardPage .card .singleTable .areaGroup .areaList .areaCell{display:flex;align-items:center}.tablePage .cardPage .card .cardContent .areaGroup .areaList .areaCell .ms-Checkbox input,.tablePage .cardPage .card .singleTable .areaGroup .areaList .areaCell .ms-Checkbox input{margin-right:50px}.tablePage .cardPage .card .cardContent .areaGroup .areaList .areaCell .ms-Checkbox label .checkboxLabel,.tablePage .cardPage .card .singleTable .areaGroup .areaList .areaCell .ms-Checkbox label .checkboxLabel{margin-left:20px}.tablePage .cardPage .card .cardContent .tableList,.tablePage .cardPage .card .singleTable .tableList{width:100%;display:flex;flex-direction:column;gap:20px}.tablePage .cardPage .card .cardContent .tableList .tableCapacity,.tablePage .cardPage .card .singleTable .tableList .tableCapacity{width:100%;display:flex;flex-direction:row;gap:15px;align-items:center;justify-content:center}.tablePage .cardPage .card .cardContent .addTableButton,.tablePage .cardPage .card .singleTable .addTableButton{margin-top:30px}",""]);const l=i},22405:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(51855),r=t(5591),o=t(72220),i=t(19350);const l=e=>{const a=(0,r.s0)(),t=function(){const[,e]=(0,n.useState)(0);return()=>{e((e=>e+1))}}(),l=sessionStorage.getItem("authToken"),c=localStorage.getItem("credentialToken");return(0,n.useEffect)((()=>{let e=null;return l||(c?(0,o.Z)({credentialTokenUuid:c}).catch((()=>{localStorage.removeItem("credentialToken")})).finally((()=>{t()})):e=setTimeout((()=>{a("/login",{replace:!0})}),3e3)),()=>{e&&clearTimeout(e)}}),[l,c]),l?n.createElement(n.Fragment,null,e.children):c?n.createElement("div",{className:"narrowContent paddedContent"},n.createElement("h1",null,"טוען"),n.createElement(i.Z,null)):n.createElement("div",{className:"narrowContent paddedContent"},n.createElement("h1",null,"אין לך הרשאה לעמוד זה"))}},96816:(e,a,t)=>{t.d(a,{Z:()=>C});var n=t(51855),r=t(38032),o=t(2490),i=t(61495),l=t(93379),c=t.n(l),s=t(7795),d=t.n(s),u=t(90569),m=t.n(u),p=t(3565),g=t.n(p),b=t(19216),f=t.n(b),h=t(44589),v=t.n(h),y=t(36801),P={};P.styleTagTransform=v(),P.setAttributes=g(),P.insert=m().bind(null,"head"),P.domAPI=d(),P.insertStyleElement=f(),c()(y.Z,P),y.Z&&y.Z.locals&&y.Z.locals;const T={en:{back:"Back"},he:{back:"חזור"}},C=e=>{const a=(0,n.useContext)(o.r),t=i.Z.useTranslationNamespace("backButton",(e=>Promise.resolve(T[e]))),l=i.Z.useIsRtl(),c=!!e.override,s=a=>(e.className||"").split(" ").concat(a).join(" ");return a.canGoBack||c?n.createElement("button",{className:s("backButton"),type:"button",onClick:c?e.override:a.goBack},n.createElement(r.J,{iconName:l?"chevronRight":"chevronLeft",className:"icon"}),t("back")):n.createElement("div",{className:s("backButton placeholder")})}},51491:(e,a,t)=>{t.d(a,{Z:()=>C});var n=t(51855),r=t(38032),o=t(96816),i=t(34297),l=t(1285),c=t(93379),s=t.n(c),d=t(7795),u=t.n(d),m=t(90569),p=t.n(m),g=t(3565),b=t.n(g),f=t(19216),h=t.n(f),v=t(44589),y=t.n(v),P=t(5199),T={};T.styleTagTransform=y(),T.setAttributes=b(),T.insert=p().bind(null,"head"),T.domAPI=u(),T.insertStyleElement=h(),s()(P.Z,T),P.Z&&P.Z.locals&&P.Z.locals;const C=e=>{const[a,t]=(0,n.useState)(!1);return n.createElement("div",{className:(c="fullHeight cardPage"+(e.bottomPanel?" withBottomPanel":""),(e.className||"").split(" ").concat(c).join(" "))},n.createElement("div",{className:"card"},n.createElement("div",{className:"cardTop"},!e.hideBack&&n.createElement(o.Z,{override:e.backButtonOverride}),n.createElement("div",{className:"cardTopHeader"},n.createElement("div",{className:"titleContainer"},e.iconName?n.createElement(r.J,{iconName:e.iconName,className:"titleIcon"}):null,n.createElement("h1",{className:"cardTopHeaderText"},e.title)),e.layerInfo?n.createElement(n.Fragment,null,n.createElement("button",{id:"layerGroupInfoButton",type:"button",onClick:()=>t(!0)},"i"),a&&n.createElement(i.U,{className:"customerDetailCallout",target:".seatSetting__numinput-container",onDismiss:()=>t(!1),directionalHint:l.b.topCenter},n.createElement("button",{type:"button",onClick:()=>t(!1)},n.createElement(r.J,{iconName:"times"})),n.createElement("div",null,e.callout))):null)),e.cardContent),e.bottomPanel&&n.createElement("div",{className:e.bottomPanelClass?e.bottomPanelClass:"buttonContainer"},e.bottomPanel));var c}},19350:(e,a,t)=>{t.d(a,{Z:()=>P});var n=t(51855),r=t(9003),o=t(93379),i=t.n(o),l=t(7795),c=t.n(l),s=t(90569),d=t.n(s),u=t(3565),m=t.n(u),p=t(19216),g=t.n(p),b=t(44589),f=t.n(b),h=t(77550),v={};v.styleTagTransform=f(),v.setAttributes=m(),v.insert=d().bind(null,"head"),v.domAPI=c(),v.insertStyleElement=g(),i()(h.Z,v),h.Z&&h.Z.locals&&h.Z.locals;var y=t(14469);const P=e=>{const[a,t]=(0,n.useState)(0),o=(0,n.useRef)(),[i,l]=r.Z.useParentSize(o),c=(0,y.Z)("(max-width:500px)"),s=(0,y.Z)("(max-width:400px)"),d=!e.contentIsNumber&&s?0:!e.contentIsNumber&&c?-50:2,u=(c||s)&&e.contentIsNumber?15:0,m=e.contentIsNumber?d+0+i:i,p=Math.min(l,c?i+d+u:m)/2.3;return(0,n.useEffect)((()=>{const e=function(e,a){const n={callback:()=>{t((e=>(e+1)%3))},desiredTime:Date.now()+a},r=()=>{n.cleared||(Date.now()>=n.desiredTime?n.callback():window.requestAnimationFrame(r))};return window.requestAnimationFrame(r),n}(0,2===a?3e3:0);return()=>{!function(e){e.cleared=!0}(e)}}),[a]),n.createElement("div",{ref:o,className:"spinner"+(()=>{switch(a){case 0:return" s0";case 1:return" s1";case 2:return" s2"}return""})(),style:{width:2*p,height:2*p}})}},2754:(e,a,t)=>{t.d(a,{b:()=>y,Z:()=>P});var n=t(51855),r=t(4772),o=t(93379),i=t.n(o),l=t(7795),c=t.n(l),s=t(90569),d=t.n(s),u=t(3565),m=t.n(u),p=t(19216),g=t.n(p),b=t(44589),f=t.n(b),h=t(440),v={};v.styleTagTransform=f(),v.setAttributes=m(),v.insert=d().bind(null,"head"),v.domAPI=c(),v.insertStyleElement=g(),i()(h.Z,v),h.Z&&h.Z.locals&&h.Z.locals;const y=e=>n.createElement("div",{className:"spinnerInput"},n.createElement(r.Z,{customButtonType:"secondary",onClick:()=>{e.onChange(e.value+1)},iconName:"plus",disabled:e.disabled}),n.createElement("input",{type:"number",value:e.value,disabled:e.disabled,onChange:a=>{const{value:t}=a.target;if(!isNaN(Number(t))){const a=e.value;e.onChange(a>1?a:1)}}}),n.createElement(r.Z,{customButtonType:"secondary",onClick:()=>{e.onChange(e.value>1?e.value-1:e.value)},iconName:"minus",disabled:e.disabled||(void 0!==e.minValue&&null!==e.minValue?e.value<=e.minValue:null)})),P=e=>n.createElement("div",{className:"spinnerInput"},n.createElement(r.Z,{disabled:e.disabled,customButtonType:"secondary",onClick:()=>e.onChange((e=>e+1)),iconName:"plus"}),n.createElement("input",{type:"number",value:e.value,onChange:a=>{const{value:t}=a.target;if(!isNaN(Number(t))){const a=parseInt(t,10);e.onChange(a>1?a:1)}}}),n.createElement(r.Z,{customButtonType:"secondary",onClick:()=>e.onChange((e=>e>1?e-1:e)),iconName:"minus",disabled:void 0!==e.minValue&&null!==e.minValue?e.value<=e.minValue:null}))},6942:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var n=t(51855),r=t(22405),o=t(43691),i=t(61495);const l=JSON.parse('{"table":"Seating settings","addTable":"Add tables","tableCapacity":"Capacity","deleteTitle":"Delete","save":"save","confirm":"Confirm","cancel":"Cancel","areaPrefs":"In which areas ?","limitTableGuest":"Limit guests per table"}'),c=JSON.parse('{"table":"הגדרות הושבה","addTable":"Add tables","tableCapacity":"Capacity","deleteTitle":"Delete","save":"שמירה","confirm":"אישור","cancel":"ביטול","areaPrefs":"באילו איזורים ?","limitTableGuest":"הגבל כמות סועדים לשולחן"}');var s=t(51491),d=t(67506),u=t(64225),m=t(77478),p=t(85945),g=t(69451),b=t(64469),f=t(2754),h=t(82717),v=t(38361),y=t(93379),P=t.n(y),T=t(7795),C=t.n(T),E=t(90569),k=t.n(E),x=t(3565),N=t.n(x),Z=t(19216),w=t.n(Z),B=t(44589),S=t.n(B),I=t(65567),G={};G.styleTagTransform=S(),G.setAttributes=N(),G.insert=k().bind(null,"head"),G.domAPI=C(),G.insertStyleElement=w(),P()(I.Z,G),I.Z&&I.Z.locals&&I.Z.locals;const L={en:l,he:c},z=e=>{var a,t;const r=(null===(a=e.table)||void 0===a?void 0:a.areas)||[],[o,l]=(0,n.useState)(r),[c,s]=(0,n.useState)(e.table.capacity),[u,m]=(0,n.useState)(!0),[p,g]=(0,n.useState)(!1),b=i.Z.useTranslationNamespace("singleTable",(e=>Promise.resolve(L[e])));(0,n.useEffect)((()=>{var a,t,n;s(e.table.capacity),1===(null===(a=null==e?void 0:e.areas)||void 0===a?void 0:a.length)?l([e.areas[0].id]):(null===(n=null===(t=e.table)||void 0===t?void 0:t.areas)||void 0===n?void 0:n.length)>0&&l(e.table.areas)}),[e]);const y=(a,t,n)=>{s(a);const r=void 0!==n?n:p;g(r);const i=t||[...o],l=Object.assign(Object.assign({},e.table),{capacity:a,areas:i});e.onUpdate(e.index,l,r)};return n.createElement("div",{className:"singleTable"},n.createElement("div",{className:"capacityButtons"},n.createElement("div",{className:"tableCapacity"},n.createElement(f.b,{value:c,minValue:1,onChange:y}),n.createElement(d.Z,{customButtonType:e.hasChanged?"primary":"default",text:b("limitTableGuest"),onClick:()=>m(!u)}),n.createElement(d.Z,{customButtonType:"attention",outlined:!p,iconProps:{iconName:"delete"},onClick:()=>y(c,o,!p)}))),(null===(t=null==e?void 0:e.areas)||void 0===t?void 0:t.length)>1&&!u&&n.createElement("div",{className:"areaGroup"},n.createElement("div",{className:"areaGroupTitle"},n.createElement("p",null,b("areaPrefs"))),n.createElement("div",{className:"areaList"},e.areas.sort(((e,a)=>e.id-a.id)).map((e=>{return n.createElement("div",{className:"areaCell",key:e.id},n.createElement(h.Z,{onChange:(a,t)=>{let n=[];n=t?[...o,e.id]:o.filter((a=>a!==e.id)),l(n),y(c,n)},className:"drop__check",checked:(a=e.id,o.some((e=>a===e)))}),n.createElement(v.Z,{primary:null==e?void 0:e.name}));var a})))))};var H=t(49470),A=t(5591),q=function(e,a,t,n){return new(t||(t=Promise))((function(r,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var a;e.done?r(e.value):(a=e.value,a instanceof t?a:new t((function(e){e(a)}))).then(i,l)}c((n=n.apply(e,a||[])).next())}))};const D={en:l,he:c},j=()=>{const{queueGroupId:e}=(0,A.UO)(),[a,t]=(0,n.useState)([]),[l,c]=(0,n.useState)([]),[f,h]=(0,n.useState)([]),v=(0,p.NL)(),[y,P]=(0,n.useState)([]),[T,C]=(0,n.useState)([]),[E,k]=(0,n.useState)([]),{enqueueSnackbar:x}=(0,u.Ds)(),{handleNotification:N}=(0,m.V)(),Z=i.Z.useTranslationNamespace("tables",(e=>Promise.resolve(D[e])));function w(e,t,n){const r=[],o=[];n&&!E.includes(e)?k((a=>[...a,e])):k((a=>a.filter((a=>a!==e)))),l.forEach(((i,l)=>{l!==e?(r.push(i),o.push(f[l])):(r.push(t),0===t.id?o.push(!0):function(e,t){const n=a[e];return function(e,a){const t=e=>e.map((e=>`${e}`)).join(", ");return t(e)!==t(a)}(n.areas.sort(),t.areas.sort())||n.capacity!==t.capacity||n.minCapacity!==t.minCapacity}(l,t)?(o.push(!0),T.includes(e)||C((a=>[...a,e]))):n?o.push(!0):(o.push(!1),C((a=>a.filter((a=>a!==e))))))})),c((()=>r)),h((()=>o))}(0,g.a)({queryKey:[`table${e}`,e],queryFn:()=>q(void 0,void 0,void 0,(function*(){return yield H.Z.queueGroup.table.get(e)})),onSuccess:e=>{e.length>0?(e.sort(((e,a)=>a.capacity-e.capacity)),t(e)):t([])},onError:e=>{console.error(e)}});const{data:B}=(0,g.a)({queryKey:["areas",e],queryFn:()=>q(void 0,void 0,void 0,(function*(){return yield H.Z.queueGroup.area.get(e)})),onError:e=>{console.error(e)}}),{mutate:S,isLoading:I}=(0,b.D)((a=>q(void 0,void 0,void 0,(function*(){yield H.Z.queueGroup.table.patch(e,a)}))),{onError:()=>{N("error",x)},onSuccess:()=>q(void 0,void 0,void 0,(function*(){yield v.invalidateQueries({queryKey:[`table${e}`]}),N("success",x)}))});return(0,n.useEffect)((()=>{if(C([]),k([]),0===a.length)c([{id:0,capacity:1,minCapacity:1,areas:[]}]),h([!0]),P([0]);else{P([]),c(a);const e=[];for(let t=0;t<a.length;t++)e.push(!1);h((()=>e))}}),[a]),n.createElement("div",{className:"tablePage"},n.createElement(r.Z,null,n.createElement(o.Z,{hideBackButton:!0,menuProps:{canLogOut:!0}}),n.createElement(s.Z,{title:Z("table"),cardContent:n.createElement("div",{className:"cardContent"},n.createElement("div",{className:"tableList"},l.map(((e,a)=>n.createElement(z,{key:a.toString().concat(String(e.id)),index:a,table:e,areas:B,onUpdate:w,hasChanged:f[a]})))),n.createElement(d.Z,{className:"addTableButton",customButtonType:"primary",iconProps:{iconName:"plus"},onClick:()=>{P((e=>[...e,l.length])),c((e=>[...e,{id:0,capacity:1,minCapacity:1,areas:[]}])),h((e=>[...e,!0]))}})),bottomPanel:n.createElement(d.Z,{customButtonType:(f.some((e=>!0===e)),"secondary"),text:Z("save"),disabled:I||f.every((e=>!1===e)),onClick:()=>{(()=>{const e={delete:[],update:[],add:[]};l.forEach(((a,t)=>{E.includes(t)?e.delete.push(a.id):T.includes(t)?e.update.push(a):y.includes(t)&&e.add.push(a)})),S(e)})()}})})))}},9003:(e,a,t)=>{t.d(a,{Z:()=>r});var n=t(51855);const r={useParentSize:function(e){const[a,t]=(0,n.useState)(0),[r,o]=(0,n.useState)(0),i=e.current&&e.current.parentElement;return(0,n.useLayoutEffect)((()=>{if(!i)return()=>{};const e=()=>{const e=i.clientHeight,n=i.clientWidth;let l=e<=140?98:5;a!==e&&t(e+(e<=79?98:5)),r!==n&&o(n+l)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})),[r,a]}}}}]);