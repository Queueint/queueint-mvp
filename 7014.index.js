"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7014],{13395:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(28276),o=n.n(r),a=n(5368),u=n.n(a)()(o());u.push([e.id,".buttonGroup :first-child:not(:last-child).ms-Button,.buttonGroup :first-child:not(:last-child) .ms-Button{border-start-end-radius:0;border-end-end-radius:0}.buttonGroup :not(:first-child):not(:last-child).ms-Button,.buttonGroup :not(:first-child):not(:last-child) .ms-Button{border-radius:0}.buttonGroup :last-child:not(:first-child).ms-Button,.buttonGroup :last-child:not(:first-child) .ms-Button{border-start-start-radius:0;border-end-start-radius:0}",""]);const s=u},47267:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(28276),o=n.n(r),a=n(5368),u=n.n(a)()(o());u.push([e.id,".queueManagerPage{height:100%}.queueManagerPage .currentCustomer{text-align:center}.queueManagerPage .currentCustomer .display{margin:.25em auto;padding:.25em 0;display:inline-block;min-width:320px;background-color:#fff;border:1px solid #ddd;border-radius:3px;box-shadow:2px 2px 8px #ddd}.queueManagerPage .currentCustomer .buttonGroup{min-width:320px;justify-content:center}@media screen and (max-width: 360px){.queueManagerPage .currentCustomer .display{min-width:0;width:100%}.queueManagerPage .currentCustomer .buttonGroup{min-width:0;width:100%}}.queueManagerPage .queueContents.main{margin-top:2em;justify-content:flex-start}.queueManagerPage .queueContents.main .customersContainer{width:100%}.queueManagerPage .queueContents.main .customersContainer .customer{padding:0 .5em;align-items:center}.queueManagerPage .queueContents.main .customersContainer .customer .ms-StackItem{text-overflow:ellipsis;overflow:hidden;width:0}",""]);const s=u},31223:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(76838),o=n(78549),a=n(51855),u=(0,n(7485).y)(),s=a.forwardRef((function(e,t){var n=e.styles,r=e.theme,o=e.className,s=e.vertical,l=e.alignContent,c=e.children,i=u(n,{theme:r,className:o,alignContent:l,vertical:s});return a.createElement("div",{className:i.root,ref:t},a.createElement("div",{className:i.content,role:"separator","aria-orientation":s?"vertical":"horizontal"},c))})),l=(0,r.z)(s,(function(e){var t,n,r=e.theme,a=e.alignContent,u=e.vertical,s=e.className,l="start"===a,c="center"===a,i="end"===a;return{root:[r.fonts.medium,{position:"relative"},a&&{textAlign:a},!a&&{textAlign:"center"},u&&(c||!a)&&{verticalAlign:"middle"},u&&l&&{verticalAlign:"top"},u&&i&&{verticalAlign:"bottom"},u&&{padding:"0 4px",height:"inherit",display:"table-cell",zIndex:1,selectors:{":after":(t={backgroundColor:r.palette.neutralLighter,width:"1px",content:'""',position:"absolute",top:"0",bottom:"0",left:"50%",right:"0",zIndex:-1},t[o.qJ]={backgroundColor:"WindowText"},t)}},!u&&{padding:"4px 0",selectors:{":before":(n={backgroundColor:r.palette.neutralLighter,height:"1px",content:'""',display:"block",position:"absolute",top:"50%",bottom:"0",left:"0",right:"0"},n[o.qJ]={backgroundColor:"WindowText"},n)}},s],content:[{position:"relative",display:"inline-block",padding:"0 12px",color:r.semanticColors.bodyText,background:r.semanticColors.bodyBackground},u&&{padding:"12px 0"}]}}),void 0,{scope:"Separator"});l.displayName="Separator"},11139:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(51855),o=n(14386),a=n(93379),u=n.n(a),s=n(7795),l=n.n(s),c=n(90569),i=n.n(c),d=n(3565),m=n.n(d),h=n(19216),p=n.n(h),g=n(44589),C=n.n(g),b=n(13395),f={};f.styleTagTransform=C(),f.setAttributes=m(),f.insert=i().bind(null,"head"),f.domAPI=l(),f.insertStyleElement=p(),u()(b.Z,f),b.Z&&b.Z.locals&&b.Z.locals;const y=e=>r.createElement(o.K,Object.assign({},e,{className:("buttonGroup",(e.className||"").split(" ").concat("buttonGroup").join(" "))}),e.children)},77014:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var r=n(51855),o=n(41578),a=n(82321),u=n(22758),s=n(14386),l=n(31223),c=n(10373),i=n(49470),d=n(52527),m=n(11139),h=n(77478),p=n(64225),g=n(43820),C=n(1564),b=n(39014),f=n(97928),y=n(61495),v=n(61813);const q=JSON.parse('{"coachQueueStatusHeadline":"Queue status","coachQueueStatusBody":"Each customer has a ticket, here you can see in real time the ticket and name of the currently served customer.","coachQueueContentsHeadline":"Waiting in queue","coachQueueContentsBody":"When customers join the queue, you can see the list here. It\'s updated in real time.","coachAddCustomerHeadline":"Add to queue","coachAddCustomerBody":"If the customer can\'t add themselves to the queue for whatever reason, you can do it manually here.","currentlyServed":"Currently served","noCustomerServed":"No customer served.","previousInQueue":"Call previous","callAgain":"Call again","nextInQueue":"Call next","waitingInQueue":"Waiting in queue","remove":"Remove","nextTicket":"The next ticket to be given to a customer: {{ticket}}","resetQueue":"Reset queue","next":"Next","understood":"Understood","back":"Back","close":"Close","xOutOfY":"{{x}} of {{y}}","addCustomer":"Add customer to queue","customerName":"Customer name","phone":"Phone","invalid":"Invalid","add":"Add","genericError":"An error occurred. Try again later."}'),x=JSON.parse('{"coachQueueStatusHeadline":"מצב התור","coachQueueStatusBody":"לכל לקוח יש מספר, כאן ניתן לראות את מספר ושם הלקוח שמקבל שירות בזמן אמת.","coachQueueContentsHeadline":"הממתינים בתור","coachQueueContentsBody":"כשלקוחות מצטרפים לתור, ניתן לצפות ברשימה כאן. היא מתעדכנת בזמן אמת.","coachAddCustomerHeadline":"הוספה לתור","coachAddCustomerBody":"במידה ולקוח לא יכול להוסיף את עצמו לתור משום מה, הנך יכול לעשות זאת ידנית מכאן.","currentlyServed":"בטיפול כרגע","noCustomerServed":"אין לקוח בטיפול.","previousInQueue":"אחורה בתור","callAgain":"קרא שוב","nextInQueue":"הבא בתור","waitingInQueue":"ממתינים בתור","remove":"הוצא","nextTicket":"המספר הבא שיינתן ללקוח: {{ticket}}","resetQueue":"אפס תור","next":"הבא","understood":"הבנתי","back":"חזרה","close":"סגור","xOutOfY":"{{x}} מתוך {{y}}","addCustomer":"הוספת לקוח לתור","customerName":"שם הלקוח","phone":"טלפון","invalid":"לא תקין","add":"הוספה","genericError":"אירעה שגיאה, נסה שנית מאוחר יותר."}'),E={en:q,he:x},w=e=>{const[t,n]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[q,x]=(0,r.useState)(!1),w=(0,v.P)(),S=y.Z.useTranslationNamespace("queueManagement",(e=>Promise.resolve(E[e]))),k=e=>{a(e),x(!0)};return(0,r.useEffect)((()=>{q&&(o?f.Z.isPhone(o)?p(!1):p(!0):p(!1))}),[o,q]),r.createElement("form",{onSubmit:r=>{r.preventDefault(),c(!0),m(!1),i.Z.queueGroup.queue.customer.post(e.queueGroupId,e.queueId,{name:t,phone:o,queueCustomer:{notifyUsingSms:!0}}).then((()=>{n(""),k(""),x(!1)})).catch((e=>{console.error(e),m(!0),w(e)})).finally((()=>{c(!1)}))},className:e.className},r.createElement("p",null,S("addCustomer")),r.createElement(s.K,{horizontal:!0},r.createElement(g.n,{value:t,onChange:(e,t)=>n(t),label:S("customerName")}),r.createElement(g.n,{type:"tel",value:o,onChange:(e,t)=>k(t),label:S("phone"),errorMessage:h?S("invalid"):"",iconProps:{iconName:"phone"}})),r.createElement(u.K,{type:"submit",disabled:l||h,text:S("add"),style:{width:"100%"},iconProps:{iconName:"plus"}}),d&&r.createElement(C.c,{messageBarType:b.f.error},S("genericError")))};var S=n(43691),k=n(9249);const N=e=>{const[t,n]=(0,r.useState)(null);return r.createElement(k.h,Object.assign({},e,{onClick:null!==t?(...r)=>{t&&(clearTimeout(t),n(null)),e.onClick(...r)}:()=>{const t=setTimeout((()=>{n(null)}),e.timeout);n(t)},style:(t=>e.style?Object.assign(Object.assign({},e.style),t):t)({transition:"transform 0.1s",transform:null!==t?"scale(1.5)":"scale(1.0)"})}))};var Q=n(93379),P=n.n(Q),I=n(7795),Z=n.n(I),A=n(90569),G=n.n(A),B=n(3565),M=n.n(B),T=n(19216),O=n.n(T),H=n(44589),z=n.n(H),j=n(47267),D={};D.styleTagTransform=z(),D.setAttributes=M(),D.insert=G().bind(null,"head"),D.domAPI=Z(),D.insertStyleElement=O(),P()(j.Z,D),j.Z&&j.Z.locals&&j.Z.locals;const R={en:q,he:x},K=e=>{const[t,n]=(0,r.useState)(!1),[g,C]=(0,r.useState)(!1),[b,f]=(0,r.useState)(0),[q,x]=(0,r.useState)(!1),{queue:E}=e,k=E&&E.id,Q=E&&E.queueGroup&&E.queueGroup.id,{enqueueSnackbar:P}=(0,p.Ds)(),{handleNotification:I}=(0,h.V)(),Z=(0,v.P)(),A=y.Z.useTranslationNamespace("queueManagement",(e=>Promise.resolve(R[e]))),G=y.Z.useIsRtl(),B=[{target:".display",headline:A("coachQueueStatusHeadline"),body:A("coachQueueStatusBody")},{target:".queueContents",headline:A("coachQueueContentsHeadline"),body:A("coachQueueContentsBody")},{target:".addCustomerForm",headline:A("coachAddCustomerHeadline"),body:A("coachAddCustomerBody")}];return(0,r.useEffect)((()=>{window.localStorage.getItem("sawQueueManagementCoach")||C(!0)}),[]),E&&E.queueGroup&&"Restaurant & Cafe"!==E.queueGroup.type&&"Bar"!==E.queueGroup.type?r.createElement("div",{className:"contentOuter"},r.createElement(S.Z,null),r.createElement("div",{className:"narrowContent fullHeight flexColumn paddedContent queueManagerPage"},null!==E&&r.createElement("h1",null,E.name),r.createElement("div",{className:"currentCustomer"},r.createElement("h2",null,A("currentlyServed")),r.createElement("div",null,r.createElement("div",{className:"display"},r.createElement(o.q,{isDataLoaded:null!==E},E&&E.currentCustomer?r.createElement(r.Fragment,null,r.createElement("b",null,E.currentCustomer.number,(0,d.QD)(E.currentCustomer.id,[...E.previousQueueCustomers,...E.queueCustomers]),".")," ",r.createElement("span",null,E&&E.currentCustomer&&E.currentCustomer.customer.name||"")):r.createElement("span",null,A("noCustomerServed"))))),r.createElement(m.Z,{horizontal:!0},r.createElement(a.a,{type:"button",text:A("previousInQueue"),onClick:()=>{x(!0),i.Z.queueGroup.queue.postPrevious(Q,k).catch((e=>{throw console.error(e),I("error",P),Z(e),e})).finally((()=>{x(!1),I("success",P)}))},iconProps:{iconName:G?"arrowCircleRight":"arrowCircleLeft"},disabled:q}),r.createElement(a.a,{type:"button",text:A("callAgain"),onClick:()=>{x(!0),i.Z.queueGroup.queue.postCallAgain(Q,k).catch((e=>{throw I("error",P),console.error(e),Z(e),e})).finally((()=>{x(!1),I("success",P)}))},iconProps:{iconName:"redo"},disabled:q}),r.createElement(u.K,{type:"button",text:A("nextInQueue"),onClick:()=>{x(!0),i.Z.queueGroup.queue.postNext(Q,k).catch((e=>{throw console.error(e),I("error",P),Z(e),e})).finally((()=>{I("success",P),x(!1)}))},iconProps:{iconName:G?"arrowCircleLeft":"arrowCircleRight"},disabled:q}))),r.createElement("div",{className:"queueContents main",style:{minHeight:"8em"}},r.createElement("h2",null,A("waitingInQueue")," (",E&&E.queueCustomers&&E.queueCustomers.length,"):"),r.createElement("div",{className:"customersContainer"},E&&E.queueCustomers&&E.queueCustomers.sort(((e,t)=>e.id-t.id)).sort(((e,t)=>e.number-t.number)).map(((e,o)=>{return r.createElement(r.Fragment,{key:o},r.createElement(s.K,{className:"customer",horizontal:!0},r.createElement(s.K.Item,{grow:1},"(",e.number,(0,d.QD)(e.id,[...E.previousQueueCustomers,...E.queueCustomers]),") ",e.customer.name),r.createElement(N,{type:"button",style:{color:"red",fontSize:"0.75em"},title:A("remove"),disabled:t,iconProps:{iconName:"times",style:{fontSize:"1em"}},onClick:(a=e.id,u=e.customer.id,()=>{n(!0),i.Z.queueGroup.queue.customer.delete(Q,k,a,u,{reason:"removed"}).catch((e=>{throw console.error(e),I("error",P),Z(e),e})).finally((()=>{n(!1),I("success",P)}))}),timeout:5e3})),o+1<E.queueCustomers.length&&r.createElement(l.Z,null));var a,u})))),r.createElement(l.Z,null),r.createElement(w,{className:"addCustomerForm",queueGroupId:Q,queueId:k}),r.createElement(o.q,{isDataLoaded:null!==E},r.createElement("span",null,A("nextTicket",{ticket:E&&E.nextEnqueueNumber}))," ",r.createElement(a.a,{type:"button",text:A("resetQueue"),onClick:()=>{i.Z.queueGroup.queue.deleteNext(Q,k).catch((e=>{throw console.error(e),Z(e),e}))}})),g&&r.createElement(c.l,{target:B[b].target,primaryButtonProps:{children:A(b+1<B.length?"next":"understood"),onClick:()=>{b+1<B.length?f(b+1):(C(!1),window.localStorage.setItem("sawQueueManagementCoach","true"))}},secondaryButtonProps:{children:A(b>0?"back":"close"),onClick:()=>{b>0?f(b-1):(C(!1),window.localStorage.setItem("sawQueueManagementCoach","true"))}},onDismiss:()=>C(!1),footerContent:A("xOutOfY",{x:b+1,y:B.length}),headline:B[b].headline},B[b].body))):r.createElement(r.Fragment,null)}},61813:(e,t,n)=>{n.d(t,{P:()=>o});var r=n(5591);function o(){const e=(0,r.s0)();return t=>{t&&t.response&&403===t.response.status&&e("/login")}}},52527:(e,t,n)=>{n.d(t,{QD:()=>a});const r=["א","ב","ג","ד","ה","ו","ז","ח","ט","י","כ","ל","מ","נ","ס","ע","פ","צ","ק","ר","ש","ת"];function o(e){if(e<0||e>=r.length)throw new Error("Out of range");return r[e]}function a(e,t){const n=t.find((t=>String(t.id)===String(e)));if(!n)return"";const a=t.filter((e=>e.number===n.number));return a.length<=1?"":function(e){if(e<0)throw new Error("Out of range");const t=Math.floor(e/r.length);return(0===t?"":o(t-1))+o(e%r.length)}(a.findIndex((t=>String(t.id)===String(e))))}}}]);